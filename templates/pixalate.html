<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>PixalAte</title>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
        <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/css/bootstrap-slider.min.css" integrity="sha512-3q8fi8M0VS+X/3n64Ndpp6Bit7oXSiyCnzmlx6IDBLGlY5euFySyJ46RUlqIVs0DPCGOypqP8IRk/EyPvU28mQ==" crossorigin="anonymous" /> -->

        <link href="../static/css/sticky_footer.css" rel="stylesheet">
        <link href="../static/css/containers.css" rel="stylesheet">
        <link href="../static/css/graph_.css" rel="stylesheet">
        <link href="../static/css/text_.css" rel="stylesheet">
        <link href="../static/css/feature_plots_.css" rel="stylesheet">
        <link href="../static/css/control_.css" rel="stylesheet">
        <link href="../static/css/small_multiples.css" rel="stylesheet">

        <!-- <link href="../static/css/specified_control.css" rel="stylesheet">
        <link href="../static/css/predicate.css" rel="stylesheet">
        <link href="../static/css/features.css" rel="stylesheet">
        <link href="../static/css/network.css" rel="stylesheet">
        <link href="../static/css/predicate_plot.css" rel="stylesheet"> -->
    </head>

  <body>
    <script src="https://kit.fontawesome.com/96adfb98a9.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/bootstrap-slider.min.js" integrity="sha512-f0VlzJbcEB6KiW8ZVtL+5HWPDyW1+nJEjguZ5IVnSQkvZbwBt2RfCBY0CBO1PsMAqxxrG4Di6TfsCPP3ZRwKpA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.18.2"></script>

    <header id="header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">PixalAte</a>
        </nav>
    </header>

    <main id="main" role="main" class="container-fluid">
        <div class="row container-0">
            <div class="col-3 container-1">
                <div id="predicate-nodes-container" class="container-2"></div>
                <div id="predicates-text-outer" class="container-2 container-bottom">
                    <div id="predicates-text-header" style="display: flex;">
                        <span class="header" style="flex-grow: 1;">Predicates</span>
                    </div>
                    <div id="predicates-text-container" style="height: calc(100% - 29px)"></div>
                </div>
            </div>
            <div class="col-3 container-1">
                <div id="score-plot-outer" class="container-2">
                    <div id="score-plot-header" style="display: flex;">
                        <span class="header" style="flex-grow: 1;">Score</span>
                    </div>
                    <div id="score-plot-container"></div>
                </div>
                <div id="feature-plot-outer" class="container-2 container-2-bottom">
                    <div id="feature-plot-header" style="display: flex;">
                        <span class="header" style="flex-grow: 1;">Feature</span>
                        <span class="header">Pivot</span>
                    </div>
                    <div id="feature-plot-container" style="height: calc(100% - 29px)"></div>
                </div>
            </div>

            <div class="col-6 container-1">
                <div class="container-2 container-right row">
                    <div id="control-container" class="container-3"></div>
                    <div id="specified-plot-outer" class="container-3">
                        <div id="specified-plot-header" style="width: 100%; display: flex">
                            <span>
                                <button id="back-button" type="button" class="btn btn-outline-secondary" disabled style="margin-top: 5px; margin-left: 5px">
                                    <i class="fas fa-undo"></i>
                                </button>
                                <button id="next-button" type="button" class="btn btn-outline-secondary" disabled style="margin-top: 5px; margin-left: 5px">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </span>
                            <span style="margin-left: auto;">
                                <button id="bookmark-button" type="button" class="btn btn-outline-secondary" disabled style="margin-top: 5px; margin-right: 5px">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                            </span>
                        </div>
                        <div id="specified-plot-container" style="width: 100%; height: calc(100% - 45px)"></div>
                    </div>
                </div>
                <div id="recommended-plots-outer" class="container-2 container-right">
                    <ul id="tabs" class="nav nav-tabs">
                        <li class="nav-item">
                            <a id="null-tab-button" class="nav-link active" data-toggle="tab" href="#null-tab"></a>
                          </li>
                        <li class="nav-item">
                          <a id="recommended-tab-button" class="nav-link" data-toggle="tab" href="#recommended-tab">Why?</a>
                        </li>
                        <li class="nav-item">
                          <a id="bookmarked-tab-button" class="nav-link" data-toggle="tab" href="#bookmarked-tab">Bookmarked</a>
                        </li>
                      </ul>
                    <div class="tab-content recommended-tab-content">
                        <div role="tabpanel" class="tab-pane active" id="null-tab"></div>
                        <div role="tabpanel" class="tab-pane recommended-tab-panel" id="recommended-tab">
                            <div id="recommended-plots-buttons"></div>
                            <div id="recommended-plots-container"></div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="bookmarked-tab">
                            <div id="bookmarked-plots-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer id="footer" class="footer">
      <div class="container">
        <span class="text-muted"></span>
      </div>
    </footer>

    <script src="../static/js/graph.js"></script>
    <script src="../static/js/text.js"></script>
    <script src="../static/js/pixalate.js"></script>

    <script src="../static/js/vega_lite_plot.js"></script>
    <script src="../static/js/small_multiple_plots.js"></script>
    <script src="../static/js/score_plot.js"></script>
    <script src="../static/js/feature_plots.js"></script>
    <script src="../static/js/control.js"></script>
    <script src="../static/js/specified_plot.js"></script>
    <script src="../static/js/recommended_plots.js"></script>
    <script src="../static/js/bookmarked_plots.js"></script>

    <!--
    <script src="../static/js/data_plots.js"></script>
    -->

    <script>
        var graph_container_id = "predicate-nodes-container"
        var text_container_id = "predicates-text-container"
        var control_parent = "control-parent"

        var score_plot_container_id = "score-plot-container"
        var feature_plots_container_id = "feature-plot-container"

        var specified_plot_container_id = "specified-plot-container"
        var recommended_plots_container_id = "recommended-plots-container"
        var recommended_plots_button_id = "recommended-plots-buttons"
        var control_container_id = "control-container"
        var bookmarked_plots_container_id = "bookmarked-plots-container"

        var predicate_masks = {{predicate_masks|safe}}
        var predicate_feature_masks = {{predicate_feature_masks|safe}}
        var predicates = {{predicates|safe}}
        var graph_data = {{nodes_links|safe}}

        var data = {{data|safe}}
        var dtypes = {{dtypes|safe}}
        var features = {{features|safe}}
        var feature_values = {{feature_values|safe}}
        var score_col = '{{score_col|safe}}'
        
        var graph = new Graph(graph_container_id, graph_data, score_col)
        var text = new Text(text_container_id, graph_data, predicates, dtypes)
        var control = new Control(control_container_id, features, dtypes, feature_values, score_col)
        var specified_plot = new SpecifiedPlot(specified_plot_container_id, control, null, null)
        var recommended_plots = new RecommendedPlots(recommended_plots_container_id, feature_values)
        var bookmarked_plots = new BookmarkedPlots(bookmarked_plots_container_id, feature_values)
        var pixalate = new PixalAte(graph, text, specified_plot, recommended_plots, bookmarked_plots,
                                    score_plot_container_id, feature_plots_container_id,
                                    data, dtypes, score_col, predicates, predicate_masks, predicate_feature_masks)
        // var pixalate = new PixalAte(data, features, dtypes, feature_values, predicates, predicate_masks, nodes_links, score_col, predicate_nodes_container_id,
        //         predicates_text_container_id, score_plot_container_id, feature_plot_container_id, control_container_id, bookmarked_container_id, specified_plot_container_id,
        //         recommended_plots_container_id, recommended_plots_button_id)

        // var predicate_id = 0
        // var predicate = predicates[predicate_id]
        // var feature = "crew_attr_0"
        // pixalate.select_predicate_id(predicate_id)
        // pixalate.select_predicate_feature(predicate_id, predicate, feature)
    </script>

  </body>
</html>